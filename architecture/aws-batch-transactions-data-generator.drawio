<mxfile host="65bd71144e">
    <diagram name="Page-1" id="vN-N5EGKdUY2qk_XAQFN">
        <mxGraphModel dx="1344" dy="1704" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="P8IGqdHoadZixmBtzf20-1" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF6B35;strokeWidth=2;fillColor=none;dashed=1;dashPattern=5 5;" parent="1" vertex="1">
                    <mxGeometry x="420" y="230" width="570" height="400" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-2" value="AWS Batch Orchestration" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#FF6B35;" parent="1" vertex="1">
                    <mxGeometry x="615" y="240" width="180" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-3" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.codebuild;" parent="1" vertex="1">
                    <mxGeometry x="30" y="100" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-4" value="CodeBuild&#xa;Build &amp; Deploy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="20" y="185" width="98" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-5" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ecr;" parent="1" vertex="1">
                    <mxGeometry x="300" y="100" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-6" value="ECR&#xa;Container Registry" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="290" y="185" width="98" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-7" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" parent="1" vertex="1">
                    <mxGeometry x="100" y="350" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-8" value="DynamoDB&lt;br&gt;100k PANs&lt;br&gt;(SHA256 Hashes)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="74" y="445" width="130" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-9" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.batch;" parent="1" vertex="1">
                    <mxGeometry x="460" y="320" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-10" value="Spot Queue&#xa;Priority: 100&#xa;4000 vCPUs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="450" y="405" width="98" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-11" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.batch;" parent="1" vertex="1">
                    <mxGeometry x="460" y="480" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-12" value="On-Demand Queue&#xa;Priority: 100&#xa;4000 vCPUs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="450" y="565" width="98" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-13" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.fargate;" parent="1" vertex="1">
                    <mxGeometry x="660" y="320" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-14" value="Spot Compute Env&#xa;Fargate Spot&#xa;Max 4000 vCPUs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="650" y="405" width="98" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-15" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.fargate;" parent="1" vertex="1">
                    <mxGeometry x="660" y="480" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-16" value="On-Demand Compute Env&#xa;Fargate On-Demand&#xa;Max 4000 vCPUs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="650" y="565" width="98" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-17" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ecs;" parent="1" vertex="1">
                    <mxGeometry x="860" y="400" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-18" value="ECS Fargate Tasks&lt;br&gt;3 Threads Each&lt;br&gt;4 vCPU + 28GB RAM" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="850" y="485" width="98" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-19" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="558" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-20" value="S3 Data Bucket&lt;br&gt;(Parquet Files&lt;br&gt;for all 6 Tables)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="1150" y="650" width="98" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-21" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;Data Generation Process:&lt;/b&gt;&lt;br&gt;&lt;br&gt;1. Each thread gets 1000 unique hash_pans from DynamoDB&lt;br&gt;2. Generate&amp;nbsp;&lt;br&gt;3. Generate&amp;nbsp;&lt;br&gt;4. Select 0.1% for chargebacks (~100 transactions)&lt;br&gt;5. Upload all 6 tables to S3 (in 4 different S3 Buckets)&lt;br&gt;&lt;br&gt;Thread/parallel execution (Rayon library) Architecture:&lt;br&gt;• 3 threads per container&lt;br&gt;• Each with parallel S3 uploads&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#232F3E;strokeColor=#232F3E;fillColor=#FFF2CC;align=left;verticalAlign=top;spacingTop=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="440" y="-150" width="240" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-22" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;S3 Buckets Structure:&lt;/b&gt;&lt;br&gt;&lt;br&gt;table_name/yyyy/mm/dd/&lt;br&gt;├── authentication/&amp;nbsp;&lt;br&gt;├── authentication_hash/&amp;nbsp;&lt;br&gt;├── clearing/&amp;nbsp;&lt;br&gt;├── clearing_hash/&amp;nbsp;&lt;br&gt;├── chargeback/&amp;nbsp;&lt;br&gt;└── chargeback_hash/&lt;br&gt;&lt;br&gt;Each thread/parallel execution generates/retrieves:&lt;br&gt;• Unique hash_pan from DynamoDB&lt;br&gt;• 1,000,000 rows per regular/hash table&lt;br&gt;• ~1,000 chargeback rows (0.1%)&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;For 10TB of data job generates ~billion transactions per authentication and clearing tables.&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#232F3E;strokeColor=#232F3E;fillColor=#E6F3FF;align=left;verticalAlign=top;spacingTop=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="730" y="-186" width="200" height="376" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-23" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FF6B35;strokeWidth=2;" parent="1" source="P8IGqdHoadZixmBtzf20-3" target="P8IGqdHoadZixmBtzf20-5" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="178" y="139" as="sourcePoint"/>
                        <mxPoint x="300" y="139" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-24" value="Build &amp; Push&#xa;Docker Image" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#FF6B35;" parent="1" vertex="1">
                    <mxGeometry x="178" y="110" width="70" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-26" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Seed 100k&lt;br&gt;Card PANs&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#4CAF50;" parent="1" vertex="1">
                    <mxGeometry x="38" y="258" width="80" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-27" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#2196F3;strokeWidth=2;" parent="1" target="P8IGqdHoadZixmBtzf20-9" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="110" y="150" as="sourcePoint"/>
                        <mxPoint x="460" y="359" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="250" y="150"/>
                            <mxPoint x="250" y="280"/>
                            <mxPoint x="499" y="280"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-28" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Submit&lt;br&gt;Batch Jobs using Docker Image from ECR for containers&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2196F3;" parent="1" vertex="1">
                    <mxGeometry x="270" y="295" width="100" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-29" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FF9800;strokeWidth=2;" parent="1" source="P8IGqdHoadZixmBtzf20-9" target="P8IGqdHoadZixmBtzf20-13" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="538" y="359" as="sourcePoint"/>
                        <mxPoint x="660" y="359" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-30" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FF9800;strokeWidth=2;" parent="1" source="P8IGqdHoadZixmBtzf20-11" target="P8IGqdHoadZixmBtzf20-15" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="538" y="519" as="sourcePoint"/>
                        <mxPoint x="660" y="519" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-31" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#9C27B0;strokeWidth=2;" parent="1" source="P8IGqdHoadZixmBtzf20-13" target="P8IGqdHoadZixmBtzf20-17" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="738" y="359" as="sourcePoint"/>
                        <mxPoint x="860" y="439" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="780" y="359"/>
                            <mxPoint x="780" y="439"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-32" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#9C27B0;strokeWidth=2;" parent="1" source="P8IGqdHoadZixmBtzf20-15" target="P8IGqdHoadZixmBtzf20-17" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="738" y="519" as="sourcePoint"/>
                        <mxPoint x="860" y="439" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="780" y="519"/>
                            <mxPoint x="780" y="439"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-33" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#E91E63;strokeWidth=2;" parent="1" target="P8IGqdHoadZixmBtzf20-7" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="850" y="439" as="sourcePoint"/>
                        <mxPoint x="178" y="389" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="800" y="440"/>
                            <mxPoint x="800" y="650"/>
                            <mxPoint x="300" y="650"/>
                            <mxPoint x="300" y="389"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-34" value="Get 1000 unique&lt;br&gt;hash_pans per thread" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#E91E63;" parent="1" vertex="1">
                    <mxGeometry x="510" y="660" width="90" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-35" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=3;" parent="1" source="P8IGqdHoadZixmBtzf20-17" target="P8IGqdHoadZixmBtzf20-19" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="938" y="439" as="sourcePoint"/>
                        <mxPoint x="1200" y="439" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1090" y="440"/>
                            <mxPoint x="1090" y="597"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-36" value="Upload all&amp;nbsp;&lt;div&gt;6 Tables partitioned in batches&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#4CAF50;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="990" y="390" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-37" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#2196F3;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="P8IGqdHoadZixmBtzf20-11" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="250" y="160" as="sourcePoint"/>
                        <mxPoint x="509" y="330" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="250" y="150"/>
                            <mxPoint x="250" y="280"/>
                            <mxPoint x="400" y="280"/>
                            <mxPoint x="400" y="519"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-38" value="&lt;span style=&quot;font-size: 10px;&quot;&gt;Sequence number range tracking for a given day&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#4CAF50;" parent="1" vertex="1">
                    <mxGeometry x="-100" y="230" width="90" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-39" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" parent="1" vertex="1">
                    <mxGeometry x="-40" y="350" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-40" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="P8IGqdHoadZixmBtzf20-3" target="P8IGqdHoadZixmBtzf20-7" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="90" y="188" as="sourcePoint"/>
                        <mxPoint x="138" y="360" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="10" y="139"/>
                            <mxPoint x="10" y="250"/>
                            <mxPoint x="140" y="250"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-41" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=2;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="P8IGqdHoadZixmBtzf20-3" target="P8IGqdHoadZixmBtzf20-39" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="70" y="180" as="sourcePoint"/>
                        <mxPoint x="148" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="-1" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-42" value="DynamoDB&lt;br&gt;&amp;nbsp;Sequence Number batches tracker" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="-66" y="445" width="130" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-43" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#E91E63;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="850" y="440" as="sourcePoint"/>
                        <mxPoint x="-40" y="384" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="810" y="440"/>
                            <mxPoint x="810" y="695"/>
                            <mxPoint x="-90" y="695"/>
                            <mxPoint x="-90" y="384"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-44" value="1. Check whether the sequence number batch was already processed (avoids duplication of work or missing work in case Spot task was interrupted)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#E91E63;" parent="1" vertex="1">
                    <mxGeometry x="232" y="710" width="214" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-45" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="350" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-46" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
                    <mxGeometry x="1160" y="192" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-47" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
                    <mxGeometry x="1161" y="32" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-49" value="S3 Data Bucket&lt;br&gt;(Parquet Files&lt;br&gt;for authorization and authorization_hash Tables)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="1139" y="445" width="120" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-50" value="S3 Data Bucket&lt;br&gt;(Parquet Files&lt;br&gt;for clearing and clearing_hash Tables)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="1139" y="283" width="120" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-51" value="S3 Data Bucket&lt;br&gt;(Parquet Files&lt;br&gt;for chargeback and chargeback_hash&amp;nbsp;Tables)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
                    <mxGeometry x="1140" y="120" width="120" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-52" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=3;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="P8IGqdHoadZixmBtzf20-45" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="938" y="440" as="sourcePoint"/>
                        <mxPoint x="1150" y="438" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1090" y="440"/>
                            <mxPoint x="1090" y="389"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-53" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=3;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="P8IGqdHoadZixmBtzf20-46" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1090" y="310" as="sourcePoint"/>
                        <mxPoint x="1152" y="178" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1090" y="390"/>
                            <mxPoint x="1090" y="231"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-54" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=3;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1090" y="170" as="sourcePoint"/>
                        <mxPoint x="1160" y="70" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1090" y="250"/>
                            <mxPoint x="1090" y="70"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-56" value="&lt;div style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;4 S3 Buckets:&lt;/b&gt;&lt;/div&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;•&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&lt;i&gt;&amp;nbsp;&lt;b&gt;payment-data&lt;/b&gt;:&amp;nbsp;&lt;/i&gt;Contains all of the tables&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;•&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;i style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;authorization-data&lt;/b&gt;:&amp;nbsp;&lt;/i&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;Contains authorization and authorization_hash tables only&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;•&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;i style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;clearing-data&lt;/b&gt;:&amp;nbsp;&lt;/i&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;Contains clearing and clearing_hash tables only&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;•&lt;/span&gt;&lt;span style=&quot;font-size: 12px; background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;i style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;chargeback-data&lt;/b&gt;:&amp;nbsp;&lt;/i&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;Contains chargeback and chargeback_hash tables only&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212)); font-size: 12px;&quot;&gt;S3 Buckets Structure:&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;table_name/yyyy/mm/dd/&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── authentication/&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── authentication_hash/&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── clearing/&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── clearing_hash/&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── chargeback/&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(35, 47, 62), rgb(189, 199, 212));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; └── chargeback_hash/&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#232F3E;strokeColor=#232F3E;fillColor=#E6F3FF;align=left;verticalAlign=top;spacingTop=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="1056.25" y="-290" width="287.5" height="302" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-57" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FF6B35;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="P8IGqdHoadZixmBtzf20-1" target="P8IGqdHoadZixmBtzf20-5" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="780" y="220" as="sourcePoint"/>
                        <mxPoint x="380" y="142" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="705" y="200"/>
                            <mxPoint x="705" y="170"/>
                            <mxPoint x="430" y="170"/>
                            <mxPoint x="430" y="139"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-58" value="Docker Image&lt;div&gt;pulled by AWS Batch and used by tasks/containers&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#FF6B35;" parent="1" vertex="1">
                    <mxGeometry x="485" y="178" width="140" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="P8IGqdHoadZixmBtzf20-59" value="2. Store number of batches (by incrementing counter) that were process for a given day for ease of calculating sequence number range per given day&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#E91E63;" parent="1" vertex="1">
                    <mxGeometry x="232" y="750" width="218" height="30" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>